<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>


        <div class="row" style="    margin-bottom: 0px;">

            <h:panelGroup >
                <div id="barraup" class="col-xs-12 col-md-12 " style="z-index:2" >
                    <div  class="box">

                        <div  class="box-body">
                            <b:buttonGroup >


                                <p:commandButton type="submit"  value="Guardar"  update=":form:menuedit" actionListener="#{controlRoles.guardarModulo}"  >
                                    <i class="fa fa-save"></i>
                                </p:commandButton>
                                <b:commandButton type="submit"  value="Cancelar"  ajax="true"  look="warning">
                                    <i class="fa fa-eraser"></i>
                                </b:commandButton>


                            </b:buttonGroup>
                        </div>


                        <!-- /.box-body -->
                    </div>
                </div>
            </h:panelGroup>
        </div>
        <b:panel   id="modulomenu">

            <p:focus context="modulomenu"/>
            <p:messages autoUpdate="false"/>
            <div class="ui-g">
                <div class="ui-g-12 ui-lg-4 ui-g-nopad">
                    <div class="ui-g-12">
                        <b:selectOneMenu  label="GRUPO" class="form-control select2"  value="#{controlRoles.grupoSelect}" title="Asigne almenos un ROL" style="margin:0 auto">
                            <f:selectItem  itemLabel="Selecione un Rol" itemValue="" />
                            <f:selectItems value="#{controlRoles.gruposLista}" />
                        </b:selectOneMenu>
                    </div>
                    <div class="ui-g-12">
                        <b:selectOneMenu  label="SUBGRUPO" class="form-control select2"  value="#{controlRoles.subgrupoSelect}" title="Asigne almenos un ROL" style="margin:0 auto">
                            <f:selectItem  itemLabel="Selecione un Rol" itemValue="" />
                            <f:selectItems value="#{controlRoles.subgruposLista}" />
                        </b:selectOneMenu>
                    </div>
                    <div class="ui-g-12">
                        <b:inputText   label="NOMBRE" required="true" requiredMessage="ingreso el nombre" style="height: 40px;" value="#{controlRoles.nombremodulo}" >


                            <f:facet name="prepend">
                                <i class="fa fa-address-card"></i>
                            </f:facet>

                        </b:inputText>
                    </div>
                    <div class="ui-g-12">
                        <b:inputText  label="ICONO"  required="true" requiredMessage="ingrese texto del icono" style="height: 40px;" value="#{controlRoles.iconomodulo}" >


                            <f:facet name="prepend">
                                <i class="fa fa-dot-circle-o"></i>
                            </f:facet>

                        </b:inputText>
                    </div>
                    <div class="ui-g-12">
                        <b:selectOneMenu label="Pagina" required="true" requiredMessage="Selecione una pagina"  class="form-control select2"  value="#{controlRoles.paginaStrin}" title="Asigne almenos un Tipo de Modelo" style="margin:0 auto">
                            <f:selectItem  itemLabel="Selecione un Tipo" itemValue="" />
                            <f:selectItems value="#{controlRoles.paginas}" />
                        </b:selectOneMenu>
                    </div>




                </div>



                <div class="ui-g-12 ui-lg-4"  >
                    <b:panel id="menuedit" look="default" collapsible="false" style="background: #C7E6F6" >
                        <f:facet name="heading">
                            <h:outputText value="MENU" />
                        </f:facet>
                        <ui:repeat value="#{controlUtilidades.util.getMenu(controlRoles.modulos)}" var="modulos" >
                            <!--modulos con grupos-->

                            <b:panel  collapsed="true" look="primary" style="background: #007bb6" rendered='#{modulos.modulos!=null }'  >
                                <f:facet name="heading">
                                    <i class="fa #{modulos.icono}" style="padding-right:10px;color: #ffffff" />
                                    <h:outputText  value="#{modulos.nombre}" style="padding-right:20px;color: #ffffff"/>
                                </f:facet>
                                <!--modulos sin subgrupo-->
                                <ui:repeat value="#{modulos.modulos}" var="modulos2" >
                                    <ui:repeat value="#{modulos2.getSubgrupos()}" var="subgrupos" >
                                        <b:panel  collapsed="true" look="danger" style="background: #205081"  >
                                            <f:facet name="heading">
                                                <i class="fa #{subgrupos.getIcono()}" style="padding-right:10px" />
                                                <h:outputText value="#{subgrupos.getNombre()}" style="padding-right:20px"/>
                                            </f:facet>
                                            <b:inputText readonly="true" style="height: 24px;" value="#{modulos2.nombre}"  >
                                                <f:facet name="prepend">
                                                    <b:commandButton  value="" disabled="true" style="border-radius: 0px 0px 0px 0px"
                                                                      look="default"  
                                                                      size="sm"  tooltip-position="bottom" 
                                                                      >
                                                        <i class="fa #{modulos2.icono}"></i>
                                                    </b:commandButton>
                                                </f:facet>
                                                <f:facet name="append">
                                                    <b:commandButton  value=""  look="danger" 
                                                                      size="sm"  tooltip-position="bottom"  >
                                                        <i class="fa fa-trash-o"></i>
                                                    </b:commandButton>
                                                </f:facet>
                                            </b:inputText>
                                        </b:panel>
                                    </ui:repeat>
                                    <b:inputText readonly="true" style="height: 24px;" value="#{modulos2.nombre}" rendered="#{modulos2.getSubgrupos()==null}" >
                                        <f:facet name="prepend">
                                            <b:commandButton  value="" disabled="true" style="border-radius: 0px 0px 0px 0px"
                                                              look="default"  
                                                              size="sm"  tooltip-position="bottom" 
                                                              >
                                                <i class="fa #{modulos2.icono}"></i>
                                            </b:commandButton>
                                        </f:facet>
                                        <f:facet name="append">
                                            <b:commandButton  value=""  look="danger" 
                                                              size="sm"  tooltip-position="bottom"  >
                                                <i class="fa fa-trash-o"></i>
                                            </b:commandButton>
                                        </f:facet>
                                    </b:inputText>
                                </ui:repeat>

                            </b:panel>

                            <!--modulos sin grupos-->
                            <b:inputText readonly="true" style="height: 24px;" value="#{modulos.nombre}" rendered='#{modulos.modulos==null}' >
                                <f:facet name="prepend">
                                    <b:commandButton  value="" disabled="true" style="border-radius: 0px 0px 0px 0px"
                                                      look="default"  
                                                      size="sm"  tooltip-position="bottom" 
                                                      >
                                        <i class="fa #{modulos.icono}"></i>
                                    </b:commandButton>
                                </f:facet>
                                <f:facet name="append">
                                    <b:commandButton  value=""  look="danger" 
                                                      size="sm"  tooltip-position="bottom"  >
                                        <i class="fa fa-trash-o"></i>
                                    </b:commandButton>
                                </f:facet>
                            </b:inputText>
                        </ui:repeat>
                    </b:panel>



                </div>

            </div>



        </b:panel>







        <script src="js/prueba.js"></script>





    </ui:composition>

</html>