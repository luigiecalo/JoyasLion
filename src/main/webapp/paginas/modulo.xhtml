<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <span class=""></span>
        <b:panel   id="modulomenu">
            <p:focus context="modulomenu"/>
            <div class="ui-g">
                <div class="ui-g-12 ui-lg-4 ui-g-nopad">
                    <div class="ui-g-12">
                        <b:selectOneMenu  label="GRUPO" class="form-control select2"  value="#{controlRoles.grupoSelect}" title="Asigne almenos un ROL" style="margin:0 auto">
                            <f:selectItem  itemLabel="Selecione un Rol" itemValue="" />
                            <f:selectItems value="#{controlRoles.gruposLista}" />
                        </b:selectOneMenu>
                    </div>
                    <div class="ui-g-12">
                        <b:selectOneMenu  label="SUBGRUPO" class="form-control select2"  value="#{controlRoles.subgrupoSelect}" title="Asigne almenos un ROL" style="margin:0 auto">
                            <f:selectItem  itemLabel="Selecione un Rol" itemValue="" />
                            <f:selectItems value="#{controlRoles.subgruposLista}" />
                        </b:selectOneMenu>
                    </div>
                    <div class="ui-g-12">
                        <b:inputText   label="NOMBRE" required="true" requiredMessage="ingreso el nombre" style="height: 40px;" value="#{controlRoles.mdoSelect.nombre}" >


                            <f:facet name="prepend">
                                <i class="fa fa-address-card"></i>
                            </f:facet>

                        </b:inputText>
                    </div>
                    <div class="ui-g-12">
                        <b:inputText  label="ICONO"  required="true" requiredMessage="ingrese texto del icono" style="height: 40px;" value="#{controlRoles.mdoSelect.icono}" >


                            <f:facet name="prepend">
                                <i class="fa fa-dot-circle-o"></i>
                            </f:facet>

                        </b:inputText>
                    </div>
                    <div class="ui-g-12">
                        <b:selectOneMenu label="Pagina" required="true" requiredMessage="Selecione una pagina"  class="form-control select2"  value="#{controlRoles.paginaStrin}" title="Asigne almenos un Tipo de Modelo" style="margin:0 auto">
                            <f:selectItem  itemLabel="Selecione un Tipo" itemValue="" />
                            <f:selectItems value="#{controlRoles.paginas}" />
                        </b:selectOneMenu>
                    </div>
                    <div class="ui-g-6">
                        <b:commandButton type="submit"  value="Guardar" update="modulomenu" process="@this"  actionListener="#{controlRoles.guardarModulo}"  look="primary">
                            <i class="fa fa-save"></i>
                        </b:commandButton>

                    </div>
                    <div class="ui-g-6">
                        <b:commandButton type="submit"  value="Cancelar"  update="modulomenu"  look="warning">
                            <i class="fa fa-eraser"></i>
                        </b:commandButton>
                    </div>

                    <p:messages autoUpdate="false"/>

                </div>
                
                <div class="ui-g-12 ui-lg-4" style="background: #e1e1e8" >
                    MENU
                       
                             
                    
                    <!--Lista todos los grupos-->
                    <ui:repeat value="#{controlRoles.grupos}" var="gp"  >
                        <b:panel  collapsed="true" look="info" style="background: #007bb6;margin-bottom: 2px;font-size: 12px;"  >
                            <f:facet name="heading">
                                <i class="fa #{gp.icono}" style="padding-right:10px" />
                                <h:outputText value="#{gp.nombre}" style="padding-right:20px"/>
                            </f:facet>
                            <!--Lista todos Los subgrupos-->
                            <ui:repeat value="#{controlRoles.subgrupos}" var="sgp" >
                                <b:panel collapsed="true" look="danger"   style="background: #205081">
                                    <f:facet name="heading">
                                        <i class="fa #{sgp.icono}" style="padding-right:10px" />
                                        <h:outputText value="#{sgp.nombre}" style="padding-right:20px" />

                                    </f:facet>
                                    <ui:repeat value="#{controlRoles.modulos}" var="mds2">
                                        (#{mds2.subgrupos.nombre} - #{sgp.nombre})
                                        <b:row rendered='#{mds2.subgrupos.equals(sgp)}'>
                                            <div class="col-md-12">
                                                <b:inputText readonly="true" style="height: 40px;" value="#{mds2.nombre} (#{mds2.src})" >

                                                    <f:facet name="prepend">
                                                        <b:commandButton  value="" 
                                                                          look="danger"  
                                                                          size="lg"  tooltip-position="bottom" 
                                                                          >
                                                            <i class="fa fa-trash-o"></i>
                                                        </b:commandButton>
                                                    </f:facet>
                                                    <f:facet name="prepend">
                                                        <i class="fa #{mds2.icono}"></i>
                                                    </f:facet>

                                                </b:inputText>
                                            </div>
                                        </b:row>
                                    </ui:repeat>
                                </b:panel>
                            </ui:repeat>
                            <!--listar los que no tienen subgrupo-->
                            <ui:repeat value="#{controlRoles.modulos}" var="mds">
                                <b:row rendered='#{mds.grupomodulo.equals(gp) and mds.subgrupos==null}'>
                                    <div class="col-md-12">
                                        <b:inputText readonly="true" style="height: 24px;" value="#{mds.nombre} (#{mds.src})"  >
                                            <f:facet name="prepend">
                                                <b:commandButton  value="" disabled="true" style="border-radius: 0px 0px 0px 0px"
                                                                  look="default"  
                                                                  size="sm"  tooltip-position="bottom" 
                                                                  >
                                                    <i class="fa #{mds.icono}"></i>
                                                </b:commandButton>
                                            </f:facet>
                                            <f:facet name="append">
                                                <b:commandButton  value=""  look="danger" 
                                                                  size="sm"  tooltip-position="bottom"  >
                                                    <i class="fa fa-trash-o"></i>
                                                </b:commandButton>
                                            </f:facet>
                                        </b:inputText>
                                    </div>
                                </b:row>
                            </ui:repeat>
                        </b:panel>

                    </ui:repeat>
                    <!--Lista todos Los modulos sin grupos-->
                    <ui:repeat value="#{controlRoles.modulos}" var="mdsa">
                        <b:row rendered='#{mdsa.grupomodulo==null}' style="margin-top: 0px;margin-bottom: 0px;">
                            <div class="col-md-12" >
                                <b:inputText readonly="true" style="height: 24px;" value="#{mdsa.nombre}" rendered='#{mdsa.grupomodulo==null}' >
                                    <f:facet name="prepend">
                                        <b:commandButton  value="" disabled="true" style="border-radius: 0px 0px 0px 0px"
                                                          look="default"  
                                                          size="sm"  tooltip-position="bottom" 
                                                          >
                                            <i class="fa #{mdsa.icono}"></i>
                                        </b:commandButton>
                                    </f:facet>
                                    <f:facet name="append">
                                        <b:commandButton  value=""  look="danger" 
                                                          size="sm"  tooltip-position="bottom"  >
                                            <i class="fa fa-trash-o"></i>
                                        </b:commandButton>
                                    </f:facet>
                                </b:inputText>
                            </div>
                        </b:row>

                    </ui:repeat>


                </div>
                <div class="ui-g-12 ui-lg-4"  >
                    <b:panel  id="menuedit" style="background: #afd9ee">
                        <p:accordionPanel activeIndex="2">
                            <p:tab title="Godfather Part I" ariaLabel="arial">
                                <h:panelGrid columns="2" cellpadding="10">
                                    <h:outputText
                                        value="The story begins as Don Vito Corleone..." />
                                </h:panelGrid>
                            </p:tab>

                        </p:accordionPanel>
                        <p:spacer height="10"/>
                        <ui:repeat value="#{controlRoles.modulos}"  var="modulo" >
                            <b:inputText readonly="true" style="height: 24px;" value="#{modulo.nombre}" rendered='#{modulo.grupomodulo==null}' >
                                <f:facet name="prepend">

                                    <b:commandButton  value="" disabled="true" style="border-radius: 0px 0px 0px 0px"
                                                      look="default"  
                                                      size="sm"  tooltip-position="bottom" 
                                                      >
                                        <i class="fa #{modulo.icono}"></i>
                                    </b:commandButton>
                                </f:facet>
                                <f:facet name="append">
                                    <b:commandButton  value=""  look="danger" 
                                                      size="sm"  tooltip-position="bottom"  >
                                        <i class="fa fa-trash-o"></i>
                                    </b:commandButton>
                                </f:facet>


                            </b:inputText>
                        </ui:repeat>
                    </b:panel>
              

                </div>

            </div>



        </b:panel>

        <p:messages autoUpdate="false"/>





        <script src="js/prueba.js"></script>





    </ui:composition>

</html>